function (self, unitId, unitFrame, envTable, modTable)
    local cc  = modTable.ccTable
    local defensives = modTable.defTable
    local offensives = modTable.offTable
    
    local resize = modTable.resize
    
    local auraContainers = {unitFrame.BuffFrame.PlaterBuffList}
    
    if (Plater.db.profile.buffs_on_aura2) then
        auraContainers [2] = unitFrame.BuffFrame2.PlaterBuffList
    end
    
    local didResize = false
    
    for containerID = 1, #auraContainers do
        local auraContainer = auraContainers [containerID]
        for _, auraIcon in ipairs (auraContainer) do
            if auraIcon:IsShown() then
                local id = auraIcon.SpellId
                
                
                if defensives[id] then
                    if resize(auraIcon, modTable.config.defensive) then
                        didResize = true    
                    end
                elseif offensives[id] then
                    if resize(auraIcon, modTable.config.offensive) then
                        didResize = true 
                    end
                elseif cc[id] then
                    if resize(auraIcon, modTable.config.cc) then
                        didResize = true    
                    end
                elseif auraIcon.CanStealOrPurge then
                    if resize(auraIcon, modTable.config.purgeable) then
                        didResize = true    
                    end
                else
                    if resize(auraIcon, 1) then
                        didResize = true
                    end
                end
            end
        end
    end
    
    if Plater.Masque and didResize then
        Plater.Masque.AuraFrame1:ReSkin()
        Plater.Masque.AuraFrame2:ReSkin()
    end
end
